{"version":3,"sources":["components/PhotoFetcher/index.js"],"names":["useStyles","makeStyles","theme","root","display","flexDirection","backgroundColor","palette","background","paper","borderRadius","igStyle","top","transform","width","height","PhotoFetcher","props","useTheme","onlyXS","useMediaQuery","breakpoints","only","onlySM","SMBelow","down","useState","page","setPage","picUrl","setPicUrl","classes","useSWR","pics","data","isValidating","formatPics","useMemo","map","detail","idx","download_url","split","protocol","domainArr","splice","newUrl","join","cols","handleClick","useCallback","type","payload","x","Math","floor","random","useEffect","mb","container","spacing","item","xs","sm","justify","variant","color","onClick","e","value","count","size","onChange","className","cellHeight","gridList","pic","src","alt","title","style"],"mappings":"sSAiBA,IAAMA,EAAYC,aAAW,SAACC,GAC5B,MAAO,CACLC,KAAM,CACJC,QAAS,OACTC,cAAe,SACfC,gBAAiBJ,EAAMK,QAAQC,WAAWC,MAC1CC,aAAc,WAKdC,EAAU,CACdC,IAAK,MACLC,UAAW,mBACXC,MAAO,OACPC,OAAQ,OACRL,aAAc,OA4FDM,UAzFM,SAACC,GACpB,IAAMf,EAAQgB,cACRC,EAASC,YAAclB,EAAMmB,YAAYC,KAAK,OAC9CC,EAASH,YAAclB,EAAMmB,YAAYC,KAAK,OAC9CE,EAAUJ,YAAclB,EAAMmB,YAAYI,KAAK,OAJvB,EAKNC,mBAAS,GALH,mBAKvBC,EALuB,KAKjBC,EALiB,OAMFF,mBAAS,sCAAD,OAAuCC,IAN7C,mBAMvBE,EANuB,KAMfC,EANe,KAOxBC,EAAU/B,IAPc,EASOgC,YAAOH,GAA9BI,EATgB,EAStBC,KAAYC,EATU,EASVA,aAEdC,EAAaC,mBACjB,yBACEJ,QADF,IACEA,OADF,EACEA,EAAMK,KAAI,SAACC,EAAQC,GAAS,IAAD,EACKD,EAAOE,aAAaC,MAAM,MAD/B,mBAClBC,EADkB,KAEnBC,EAFmB,KAEGF,MAAM,KAFT,EAGHE,EAAUC,QAAQ,EAAG,GAHlB,6BAMzB,IAAMC,EAAM,UAAMH,EAAN,aAAmBC,EAAUG,KAAK,KAAlC,YAFJ,IAEI,YADH,KAGLC,EAAO,EAKX,OAJIzB,EAAQyB,EAAO,EACV7B,EAAQ6B,EAAO,GACdR,EAAM,GAAK,IAAM,IAAGQ,EAAO,GAE9B,2BAAKT,GAAZ,IAAoBE,aAAcK,EAAQE,cAE9C,CAACf,EAAMd,EAAQI,IAGX0B,EAAcC,uBAAY,SAACC,EAAMC,GACrC,OAAQD,GACN,IAAK,SACHvB,EAAQwB,GACR,MACF,IAAK,SACHxB,GA5DWyB,EA4DO,GA3DjBC,KAAKC,MAAMD,KAAKE,SAAWH,GAAK,IADzC,IAAmBA,IAiEd,IAMH,OAJAI,qBAAU,WACR3B,EAAU,sCAAD,OAAuCH,MAC/C,CAACA,IAGF,eAAC,IAAD,CAAKvB,QAAQ,QAAQU,MAAM,OAA3B,UACE,cAAC,IAAD,CAAK4C,GAAI,EAAT,SACE,eAAC,IAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAAC,IAAD,CAAMD,WAAS,EAACE,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,QAAS7C,EAAS,SAAW,aAAjE,SACE,cAAC,IAAD,CAAKuC,GAAIvC,EAAS,EAAI,EAAtB,SACE,cAAC,IAAD,CAAQ8C,QAAQ,YAAYC,MAAM,UAAUC,QAAS,SAACC,EAAGC,GAAJ,OAAcpB,EAAY,SAAUoB,IAAzF,mCAKJ,cAAC,IAAD,CAAMV,WAAS,EAACE,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,QAAS7C,EAAS,SAAW,WAAjE,SACE,cAAC,IAAD,CACEmD,MAAO,GACP3C,KAAMA,EACNuC,MAAM,UACNK,KAAM/C,EAAU,QAAU,SAC1BgD,SAAU,SAACJ,EAAGC,GAAJ,OAAcpB,EAAY,SAAUoB,aAKrDlC,EACC,cAAC,IAAD,IAEA,qBAAKsC,UAAW1C,EAAQ5B,KAAxB,SACE,cAAC,IAAD,CAAUuE,WAAY,IAAKD,UAAW1C,EAAQ4C,SAAU3B,KAAM,EAA9D,SACIZ,EAAD,OAEGA,QAFH,IAEGA,OAFH,EAEGA,EAAYE,KAAI,SAACsC,GAAD,OACd,cAAC,IAAD,CAAqC5B,KAAM4B,EAAI5B,MAAQ,EAAvD,SACE,cAAC,IAAD,CAAO6B,IAAKD,EAAInC,aAAcqC,IAAKF,EAAIG,MAAOC,MAAOrE,KADpCiE,EAAInC,iBAFzB","file":"static/js/12.8d49ada8.chunk.js","sourcesContent":["import { useState, useMemo, useEffect, useCallback } from 'react'\nimport useSWR from 'swr'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport GridList from '@material-ui/core/GridList'\nimport GridListTile from '@material-ui/core/GridListTile'\nimport Pagination from '@material-ui/lab/Pagination'\nimport Image from 'material-ui-image'\nimport Box from '@material-ui/core/Box'\nimport LoadingCircle from 'components/LoadingCircle'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\n\nfunction getRandom(x) {\n  return Math.floor(Math.random() * x) + 1\n}\n\nconst useStyles = makeStyles((theme) => {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      backgroundColor: theme.palette.background.paper,\n      borderRadius: '5px',\n    },\n  }\n})\n\nconst igStyle = {\n  top: '50%',\n  transform: 'translateY(-50%)',\n  width: '100%',\n  height: '100%',\n  borderRadius: '5px',\n}\n\nconst PhotoFetcher = (props) => {\n  const theme = useTheme()\n  const onlyXS = useMediaQuery(theme.breakpoints.only('xs'))\n  const onlySM = useMediaQuery(theme.breakpoints.only('sm'))\n  const SMBelow = useMediaQuery(theme.breakpoints.down('sm'))\n  const [page, setPage] = useState(1)\n  const [picUrl, setPicUrl] = useState(`https://picsum.photos/v2/list?page=${page}`)\n  const classes = useStyles()\n\n  const { data: pics, isValidating } = useSWR(picUrl)\n\n  const formatPics = useMemo(\n    () =>\n      pics?.map((detail, idx) => {\n        const [protocol, domainStr] = detail.download_url.split('//')\n        const domainArr = domainStr.split('/')\n        let [width, height] = domainArr.splice(-2, 2)\n        width = 600\n        height = 600\n        const newUrl = `${protocol}//${domainArr.join('/')}/${width}/${height}`\n\n        let cols = 1\n        if (onlySM) cols = 2\n        else if (onlyXS) cols = 4\n        else if ((idx + 1) % 3 === 0) cols = 2\n\n        return { ...detail, download_url: newUrl, cols }\n      }),\n    [pics, onlyXS, onlySM]\n  )\n\n  const handleClick = useCallback((type, payload) => {\n    switch (type) {\n      case 'normal':\n        setPage(payload)\n        break\n      case 'random':\n        setPage(getRandom(30))\n        break\n      default:\n        break\n    }\n  }, [])\n\n  useEffect(() => {\n    setPicUrl(`https://picsum.photos/v2/list?page=${page}`)\n  }, [page])\n\n  return (\n    <Box display='block' width='100%'>\n      <Box mb={2}>\n        <Grid container spacing={1}>\n          <Grid container item xs={12} sm={6} justify={onlyXS ? 'center' : 'flex-start'}>\n            <Box mb={onlyXS ? 2 : 0}>\n              <Button variant='contained' color='primary' onClick={(e, value) => handleClick('random', value)}>\n                Fetch Random Page\n              </Button>\n            </Box>\n          </Grid>\n          <Grid container item xs={12} sm={6} justify={onlyXS ? 'center' : 'flex-end'}>\n            <Pagination\n              count={30}\n              page={page}\n              color='primary'\n              size={SMBelow ? 'small' : 'medium'}\n              onChange={(e, value) => handleClick('normal', value)}\n            />\n          </Grid>\n        </Grid>\n      </Box>\n      {isValidating ? (\n        <LoadingCircle />\n      ) : (\n        <div className={classes.root}>\n          <GridList cellHeight={200} className={classes.gridList} cols={4}>\n            {!formatPics\n              ? []\n              : formatPics?.map((pic) => (\n                  <GridListTile key={pic.download_url} cols={pic.cols || 1}>\n                    <Image src={pic.download_url} alt={pic.title} style={igStyle} />\n                  </GridListTile>\n                ))}\n          </GridList>\n        </div>\n      )}\n    </Box>\n  )\n}\n\nexport default PhotoFetcher\n"],"sourceRoot":""}