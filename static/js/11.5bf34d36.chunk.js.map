{"version":3,"sources":["components/PhotoFetcher/index.js"],"names":["useStyles","makeStyles","theme","root","display","flexDirection","backgroundColor","palette","background","paper","borderRadius","igStyle","top","transform","width","height","PhotoFetcher","props","useTheme","matchesXS","useMediaQuery","breakpoints","only","matchesSM","useState","page","setPage","picUrl","setPicUrl","classes","useSWR","pics","data","isValidating","formatPics","useMemo","map","detail","idx","download_url","split","protocol","domainArr","splice","newUrl","join","cols","handleClick1","useCallback","type","payload","x","Math","floor","random","useEffect","mb","container","spacing","xs","sm","justify","variant","color","onClick","e","value","count","size","onChange","className","cellHeight","gridList","pic","src","alt","title","style"],"mappings":"sSAiBA,IAAMA,EAAYC,aAAW,SAACC,GAC5B,MAAO,CACLC,KAAM,CACJC,QAAS,OACTC,cAAe,SACfC,gBAAiBJ,EAAMK,QAAQC,WAAWC,MAC1CC,aAAc,WAKdC,EAAU,CACdC,IAAK,MACLC,UAAW,mBACXC,MAAO,OACPC,OAAQ,OACRL,aAAc,OA2FDM,UAxFM,SAACC,GACpB,IAAMf,EAAQgB,cACRC,EAAYC,YAAclB,EAAMmB,YAAYC,KAAK,OACjDC,EAAYH,YAAclB,EAAMmB,YAAYC,KAAK,OAHzB,EAINE,mBAAS,GAJH,mBAIvBC,EAJuB,KAIjBC,EAJiB,OAKFF,mBAAS,sCAAD,OAAuCC,IAL7C,mBAKvBE,EALuB,KAKfC,EALe,KAMxBC,EAAU7B,IANc,EAQO8B,YAAOH,GAA9BI,EARgB,EAQtBC,KAAYC,EARU,EAQVA,aAEdC,EAAaC,mBACjB,yBACEJ,QADF,IACEA,OADF,EACEA,EAAMK,KAAI,SAACC,EAAQC,GAAS,IAAD,EACKD,EAAOE,aAAaC,MAAM,MAD/B,mBAClBC,EADkB,KAEnBC,EAFmB,KAEGF,MAAM,KAFT,EAGHE,EAAUC,QAAQ,EAAG,GAHlB,6BAMzB,IAAMC,EAAM,UAAMH,EAAN,aAAmBC,EAAUG,KAAK,KAAlC,YAFJ,IAEI,YADH,KAGLC,EAAO,EAKX,OAJIvB,EAAWuB,EAAO,EACb3B,EAAW2B,EAAO,GACjBR,EAAM,GAAK,IAAM,IAAGQ,EAAO,GAE9B,2BAAKT,GAAZ,IAAoBE,aAAcK,EAAQE,cAE9C,CAACf,EAAMZ,EAAWI,IAGdwB,EAAeC,uBAAY,SAACC,EAAMC,GACtC,OAAQD,GACN,IAAK,SACHvB,EAAQwB,GACR,MACF,IAAK,SACHxB,GA3DWyB,EA2DO,GA1DjBC,KAAKC,MAAMD,KAAKE,SAAWH,GAAK,IADzC,IAAmBA,IAgEd,IAMH,OAJAI,qBAAU,WACR3B,EAAU,sCAAD,OAAuCH,MAC/C,CAACA,IAGF,eAAC,IAAD,CAAKrB,QAAQ,QAAQU,MAAM,OAA3B,UACE,cAAC,IAAD,CAAK0C,GAAI,EAAT,SACE,eAAC,IAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAAC,IAAD,CAAMD,WAAS,EAACE,GAAI,GAAIC,GAAI,EAAGC,QAAS1C,EAAY,SAAW,aAA/D,SACE,cAAC,IAAD,CAAKqC,GAAIrC,EAAY,EAAI,EAAzB,SACE,cAAC,IAAD,CAAQ2C,QAAQ,YAAYC,MAAM,UAAUC,QAAS,SAACC,EAAGC,GAAJ,OAAcnB,EAAa,SAAUmB,IAA1F,mCAKJ,cAAC,IAAD,CAAMT,WAAS,EAACE,GAAI,GAAIC,GAAI,EAAGC,QAAS1C,EAAY,SAAW,WAA/D,SACE,cAAC,IAAD,CACEgD,MAAO,GACP1C,KAAMA,EACNsC,MAAM,UACNK,KAAM7C,EAAY,QAAU,SAC5B8C,SAAU,SAACJ,EAAGC,GAAJ,OAAcnB,EAAa,SAAUmB,aAKtDjC,EACC,cAAC,IAAD,IAEA,qBAAKqC,UAAWzC,EAAQ1B,KAAxB,SACE,cAAC,IAAD,CAAUoE,WAAY,IAAKD,UAAWzC,EAAQ2C,SAAU1B,KAAM,EAA9D,SACIZ,EAAD,OAEGA,QAFH,IAEGA,OAFH,EAEGA,EAAYE,KAAI,SAACqC,GAAD,OACd,cAAC,IAAD,CAAqC3B,KAAM2B,EAAI3B,MAAQ,EAAvD,SACE,cAAC,IAAD,CAAO4B,IAAKD,EAAIlC,aAAcoC,IAAKF,EAAIG,MAAOC,MAAOlE,KADpC8D,EAAIlC,iBAFzB","file":"static/js/11.5bf34d36.chunk.js","sourcesContent":["import { useState, useMemo, useEffect, useCallback } from 'react'\r\nimport useSWR from 'swr'\r\nimport Button from '@material-ui/core/Button'\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport GridList from '@material-ui/core/GridList'\r\nimport GridListTile from '@material-ui/core/GridListTile'\r\nimport Pagination from '@material-ui/lab/Pagination'\r\nimport Image from 'material-ui-image'\r\nimport Box from '@material-ui/core/Box'\r\nimport LoadingCircle from 'components/LoadingCircle'\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\r\n\r\nfunction getRandom(x) {\r\n  return Math.floor(Math.random() * x) + 1\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => {\r\n  return {\r\n    root: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      backgroundColor: theme.palette.background.paper,\r\n      borderRadius: '5px',\r\n    },\r\n  }\r\n})\r\n\r\nconst igStyle = {\r\n  top: '50%',\r\n  transform: 'translateY(-50%)',\r\n  width: '100%',\r\n  height: '100%',\r\n  borderRadius: '5px',\r\n}\r\n\r\nconst PhotoFetcher = (props) => {\r\n  const theme = useTheme()\r\n  const matchesXS = useMediaQuery(theme.breakpoints.only('xs'))\r\n  const matchesSM = useMediaQuery(theme.breakpoints.only('sm'))\r\n  const [page, setPage] = useState(1)\r\n  const [picUrl, setPicUrl] = useState(`https://picsum.photos/v2/list?page=${page}`)\r\n  const classes = useStyles()\r\n\r\n  const { data: pics, isValidating } = useSWR(picUrl)\r\n\r\n  const formatPics = useMemo(\r\n    () =>\r\n      pics?.map((detail, idx) => {\r\n        const [protocol, domainStr] = detail.download_url.split('//')\r\n        const domainArr = domainStr.split('/')\r\n        let [width, height] = domainArr.splice(-2, 2)\r\n        width = 600\r\n        height = 600\r\n        const newUrl = `${protocol}//${domainArr.join('/')}/${width}/${height}`\r\n\r\n        let cols = 1\r\n        if (matchesSM) cols = 2\r\n        else if (matchesXS) cols = 4\r\n        else if ((idx + 1) % 3 === 0) cols = 2\r\n\r\n        return { ...detail, download_url: newUrl, cols }\r\n      }),\r\n    [pics, matchesXS, matchesSM]\r\n  )\r\n\r\n  const handleClick1 = useCallback((type, payload) => {\r\n    switch (type) {\r\n      case 'normal':\r\n        setPage(payload)\r\n        break\r\n      case 'random':\r\n        setPage(getRandom(30))\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setPicUrl(`https://picsum.photos/v2/list?page=${page}`)\r\n  }, [page])\r\n\r\n  return (\r\n    <Box display='block' width='100%'>\r\n      <Box mb={2}>\r\n        <Grid container spacing={1}>\r\n          <Grid container xs={12} sm={6} justify={matchesXS ? 'center' : 'flex-start'}>\r\n            <Box mb={matchesXS ? 2 : 0}>\r\n              <Button variant='contained' color='primary' onClick={(e, value) => handleClick1('random', value)}>\r\n                Fetch Random Page\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid container xs={12} sm={6} justify={matchesXS ? 'center' : 'flex-end'}>\r\n            <Pagination\r\n              count={30}\r\n              page={page}\r\n              color='primary'\r\n              size={matchesSM ? 'small' : 'medium'}\r\n              onChange={(e, value) => handleClick1('normal', value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {isValidating ? (\r\n        <LoadingCircle />\r\n      ) : (\r\n        <div className={classes.root}>\r\n          <GridList cellHeight={200} className={classes.gridList} cols={4}>\r\n            {!formatPics\r\n              ? []\r\n              : formatPics?.map((pic) => (\r\n                  <GridListTile key={pic.download_url} cols={pic.cols || 1}>\r\n                    <Image src={pic.download_url} alt={pic.title} style={igStyle} />\r\n                  </GridListTile>\r\n                ))}\r\n          </GridList>\r\n        </div>\r\n      )}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default PhotoFetcher\r\n"],"sourceRoot":""}